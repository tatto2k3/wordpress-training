(()=>{"use strict";document.addEventListener("DOMContentLoaded",(()=>{!function(e){const{activating:s,installing:c,done:t,activationUrl:a,redirectUrl:i,ajaxUrl:n,nonce:o,wpfpRefNonce:r,wpfpStatus:d}=churchFSEData,l=e(".church-fse-welcome-notice #church-fse-install-wpfp"),u=e(".church-fse-welcome-notice .notice-dismiss"),f=e(".church-fse-welcome-notice"),w=l.find(".text"),h=l.find(".dashicons"),p=()=>{f.fadeTo(100,0,(()=>{f.slideUp(100,(()=>{f.remove()}))}))},m=async()=>{var c;w.text(s),await(c=a,new Promise((e=>{jQuery.get(c).done((()=>{e({success:!0})})).fail((()=>{e({success:!1})}))}))),await e.post(n,{nonce:r,action:"church_fse_set_wpfp_ref"}),h.removeClass("dashicons-update"),h.addClass("dashicons-yes"),w.text(t),setTimeout(p,1500),window.location.replace(i)};e(l).on("click",(async()=>{h.removeClass("hidden"),l.attr("disabled",!0),"active"!==d&&("installed"!==d?(w.text(c),await new Promise((e=>{wp.updates.ajax("install-plugin",{slug:"wp-full-stripe-free",success:()=>{e({success:!0})},error:s=>{e({success:!1,code:s.errorCode})}})})),await m()):await m())})),e(u).on("click",(()=>{e.post(n,{nonce:o,action:"church_fse_dismiss_welcome_notice",success:p})}))}(jQuery)}))})();